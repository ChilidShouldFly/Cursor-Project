# 好番茄钟 Chrome 扩展

一个简单但功能完整的番茄工作法计时器 Chrome 扩展程序。

## 主要功能

### 基础功能
- 25分钟工作时间/5分钟休息时间的自动切换
- 系统通知提醒
- 可自定义时间长度
- 简洁优雅的用户界面

### 特色功能
- 支持渐变背景色切换
- 智能文字颜色适配
- 可折叠式调试面板
- 随机通知消息
- 后台持续计时
- 自动工作/休息切换

## 使用说明

### 基本操作
1. **开始/暂停**: 点击主界面的"开始/暂停"按钮
2. **重置**: 暂停状态下双击按钮重置时间
3. **背景设置**: 从顶部下拉菜单选择渐变背景样式
4. **调试面板**: 点击右下角按钮展开/收起

### 调试功能
- **时间设置**: 在调试面板中可直接修改倒计时时长
- **通知测试**: 可测试系统通知功能
- **权限设置**: 快速跳转到通知权限设置页面

## 技术实现

### 核心模块
1. **计时器模块**
   - 使用 Service Worker 实现后台计时
   - 支持暂停/继续/重置
   - 自动切换工作/休息模式
   - 状态持久化存储

2. **通知系统**
   - 基于 Chrome Notifications API
   - 支持随机通知文本
   - 完整的权限管理

3. **背景管理**
   - 支持线性/径向渐变
   - 自动分析背景色调整文字颜色
   - 实时切换与保存

4. **数据存储**
   - 使用 Chrome Storage API
   - 保存用户偏好设置
   - 支持跨会话持久化

### 文件结构
- `manifest.json`: 扩展配置文件
- `popup.html`: 主界面
- `popup.js`: 核心逻辑
- `background.js`: 后台服务
- `styles.css`: 样式表
- `service-worker.js`: Service Worker
- `test-notification.js`: 通知测试
- `notification-messages.md`: 通知文本库

## 版本历史

### v1.3.0 (当前版本)
- 添加后台计时功能
- 支持关闭弹出窗口后继续计时
- 优化计时状态同步机制
- 添加自动模式切换功能
- 改进状态持久化存储

### v1.1.0
- 修复计时结束时通知不显示问题
- 优化通知消息格式
- 添加详细日志记录
- 改进权限检查机制

### v1.0.0
- 实现基本计时功能
- 添加系统通知提醒
- 集成调试工具支持

## 安装说明

1. 下载源代码并解压
2. 打开 Chrome 扩展管理页面 (chrome://extensions/)
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择解压后的目录

## 权限说明

- `notifications`: 发送系统通知
- `storage`: 保存用户设置
- `tabs`: 打开设置页面

## 开发说明

### 调试方法
1. 在扩展管理页面查看后台日志
2. 使用调试面板测试功能
3. 通过 Chrome DevTools 调试

### 注意事项
1. 确保浏览器允许通知权限
2. 建议使用最新版 Chrome
3. 遇到通知问题先检查系统设置

## 贡献指南

1. Fork 项目
2. 创建特性分支
3. 提交变更
4. 发起 Pull Request

## 许可证

MIT License